(()=>{const e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'];let t=0;const a=a=>{if("true"===a.dataset.modalReady)return;const d=a.querySelector('[data-modal-role="trigger"]'),n=a.querySelector('[data-modal-role="content"]');if(!d||!n)return;const o=document.createElement("div");o.className="adaire-modal-block__overlay",o.setAttribute("data-modal-overlay","");const l=document.createElement("div");l.className="adaire-modal-block__modal",l.setAttribute("role","dialog"),l.setAttribute("aria-modal","true"),l.setAttribute("aria-hidden","true");const r=document.createElement("button");r.className="adaire-modal-block__close",r.type="button",r.setAttribute("aria-label","Close modal"),r.innerHTML="&times;";const s=document.createElement("div");s.className="adaire-modal-block__content",s.appendChild(n),l.appendChild(r),l.appendChild(s),a.appendChild(o),a.appendChild(l);let i=null;const c=d=>{if(d?.preventDefault(),a.classList.contains("is-open"))return;i=document.activeElement,a.classList.add("is-open"),a.dataset.modalOpen="true",l.setAttribute("aria-hidden","false"),0===t&&document.body.classList.add("adaire-modal-open"),t+=1;const n=(()=>{const t=Array.from(s.querySelectorAll(e.join(",")));return t.includes(r)||t.unshift(r),t})(),o=n[0],c=n[n.length-1];(o||r).focus({preventScroll:!0});const m=e=>{if("Escape"===e.key)return e.preventDefault(),void u();n.length>0&&((e,t,a)=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),t.focus()))})(e,o,c)};l.addEventListener("keydown",m),l.dataset.keydownAttached="true",l.__handleKeydown=m},u=()=>{a.classList.contains("is-open")&&(a.classList.remove("is-open"),a.dataset.modalOpen="false",l.setAttribute("aria-hidden","true"),t=Math.max(0,t-1),0===t&&document.body.classList.remove("adaire-modal-open"),"true"===l.dataset.keydownAttached&&(l.__handleKeydown&&(l.removeEventListener("keydown",l.__handleKeydown),delete l.__handleKeydown),delete l.dataset.keydownAttached),i&&i.focus&&i.focus({preventScroll:!0}))};d.addEventListener("click",c),d.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||c(e)}),o.addEventListener("click",u),r.addEventListener("click",u),a.addEventListener("modal:open",c),a.addEventListener("modal:close",u),a.dataset.modalReady="true"},d=()=>{document.querySelectorAll("[data-modal-block]").forEach(a)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()})();