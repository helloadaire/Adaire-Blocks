document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".adaire-mega-menu").forEach(e=>{!function(e){const n=e.querySelector(".adaire-mega-menu__menu-btn"),i=(e.querySelector(".adaire-mega-menu__menu-container"),e.querySelector(".adaire-mega-menu__mobile-overlay")),t=e.querySelector(".adaire-mega-menu__mobile-content"),a=e.querySelectorAll(".adaire-mega-menu__dropdown-header"),o=e.querySelectorAll(".adaire-mega-menu__sub-dropdown-header");let r=!1,l=null,s=[],c=[];function d(){const e=t.querySelector(".adaire-mobile-menu__tier--active");if(e){const n=function(){const e=t.querySelector(".adaire-mobile-menu__tier--active");return e?e.querySelector(".adaire-mobile-menu__close-btn")?1:e.querySelector(".adaire-mobile-menu__back-btn")?2:3:1}(),i=0===s.length?1:s[s.length-1].level,a=i>n;console.log("Transition direction:",{currentLevel:n,targetLevel:i,isGoingForward:a}),a?e.classList.add("adaire-mobile-menu__tier--exiting-forward"):e.classList.add("adaire-mobile-menu__tier--exiting-backward"),e.classList.remove("adaire-mobile-menu__tier--active"),setTimeout(()=>{if(e.remove(),0===s.length)m(a);else{const e=s[s.length-1];2===e.level?u(e.item,a):3===e.level&&_(e.item,a)}},300)}else if(0===s.length)m(!0);else{const e=s[s.length-1];2===e.level?u(e.item,!0):3===e.level&&_(e.item,!0)}}function m(e=!0){const a=`\n            <div class="adaire-mobile-menu__tier adaire-mobile-menu__tier--active">\n                <div class="adaire-mobile-menu__header">\n                    <h3>Menu</h3>\n                    <button class="adaire-mobile-menu__close-btn" data-action="close">\n                        <span class="adaire-mobile-menu__close-icon">✕</span>\n                    </button>\n                </div>\n                <div class="adaire-mobile-menu__items">\n                    ${c.map(e=>`\n                        <div class="adaire-mobile-menu__item ${e.children.length>0?"has-children":""}" data-item-id="${e.id}">\n                            <div class="adaire-mobile-menu__item-content">\n                                <span class="adaire-mobile-menu__item-title ${e.isBold?"bold":""}">${e.title}</span>\n                                ${e.children.length>0?'<span class="adaire-mobile-menu__chevron">›</span>':""}\n                            </div>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        `;t.innerHTML=a;const o=t.querySelector(".adaire-mobile-menu__tier");e?o.classList.add("adaire-mobile-menu__tier--entering-forward"):o.classList.add("adaire-mobile-menu__tier--entering-backward"),setTimeout(()=>{o.classList.remove("adaire-mobile-menu__tier--entering-forward","adaire-mobile-menu__tier--entering-backward")},300),t.querySelector(".adaire-mobile-menu__close-btn").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Close button clicked"),i.classList.remove("mobile-overlay-show"),n.innerHTML='<span class="adaire-mega-menu__menu-icon">☰</span>',r=!1,s=[]}),t.querySelectorAll(".adaire-mobile-menu__item.has-children").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),console.log("Tier 1 item clicked:",e);const i=e.getAttribute("data-item-id"),t=c.find(e=>e.id===i);t&&t.children.length>0&&(s.push({level:2,item:t}),d())})})}function u(e,n=!0){const i=`\n            <div class="adaire-mobile-menu__tier adaire-mobile-menu__tier--active">\n                <div class="adaire-mobile-menu__header">\n                    <button class="adaire-mobile-menu__back-btn" data-action="back">\n                        <span class="adaire-mobile-menu__back-icon">‹</span>\n                        <span class="adaire-mobile-menu__back-text">Back</span>\n                    </button>\n                    <h3>${e.title}</h3>\n                </div>\n                <div class="adaire-mobile-menu__items">\n                    ${e.children.map(e=>`\n                        <div class="adaire-mobile-menu__item ${e.children.length>0?"has-children":""}" data-item-id="${e.id}">\n                            <div class="adaire-mobile-menu__item-content">\n                                <span class="adaire-mobile-menu__item-title ${e.isBold?"bold":""}">${e.title}</span>\n                                ${e.children.length>0?'<span class="adaire-mobile-menu__chevron">›</span>':""}\n                            </div>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        `;t.innerHTML=i;const a=t.querySelector(".adaire-mobile-menu__tier");n?a.classList.add("adaire-mobile-menu__tier--entering-forward"):a.classList.add("adaire-mobile-menu__tier--entering-backward"),setTimeout(()=>{a.classList.remove("adaire-mobile-menu__tier--entering-forward","adaire-mobile-menu__tier--entering-backward")},300),t.querySelector(".adaire-mobile-menu__back-btn").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Back button clicked"),s.pop(),d()}),t.querySelectorAll(".adaire-mobile-menu__item.has-children").forEach(n=>{n.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),console.log("Tier 2 item clicked:",n);const t=n.getAttribute("data-item-id"),a=e.children.find(e=>e.id===t);a&&a.children.length>0&&(s.push({level:3,item:a}),d())})})}function _(e,n=!0){const i=`\n            <div class="adaire-mobile-menu__tier adaire-mobile-menu__tier--active">\n                <div class="adaire-mobile-menu__header">\n                    <button class="adaire-mobile-menu__back-btn" data-action="back">\n                        <span class="adaire-mobile-menu__back-icon">‹</span>\n                        <span class="adaire-mobile-menu__back-text">Back</span>\n                    </button>\n                    <h3>${e.title}</h3>\n                </div>\n                <div class="adaire-mobile-menu__items">\n                    ${e.children.map(e=>`\n                        <div class="adaire-mobile-menu__item" data-item-id="${e.id}">\n                            <a href="${e.url}" class="adaire-mobile-menu__item-content">\n                                <span class="adaire-mobile-menu__item-title ${e.isBold?"bold":""}">${e.title}</span>\n                            </a>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        `;t.innerHTML=i;const a=t.querySelector(".adaire-mobile-menu__tier");n?a.classList.add("adaire-mobile-menu__tier--entering-forward"):a.classList.add("adaire-mobile-menu__tier--entering-backward"),setTimeout(()=>{a.classList.remove("adaire-mobile-menu__tier--entering-forward","adaire-mobile-menu__tier--entering-backward")},300),t.querySelector(".adaire-mobile-menu__back-btn").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Back button clicked (tier 3)"),s.pop(),d()})}n&&i&&t?(console.log("Mobile menu button found and event listener attached"),n.addEventListener("click",t=>{console.log("Mobile menu button clicked!",{menuOpen:r,target:t.target}),t.preventDefault(),t.stopPropagation(),r?(console.log("Closing mobile menu..."),i.classList.remove("mobile-overlay-show"),n.innerHTML='<span class="adaire-mega-menu__menu-icon">☰</span>',r=!1,s=[]):(console.log("Opening mobile menu..."),i.classList.add("mobile-overlay-show"),n.innerHTML='<span class="adaire-mega-menu__menu-icon">✕</span>',r=!0,s=[],c=function(){const n=[];return e.querySelectorAll(".adaire-mega-menu__dropdown").forEach(e=>{const i=e.querySelector(".adaire-mega-menu__dropdown-header"),t=e.querySelector(".adaire-mega-menu__menu");if(i&&t){const e=i.querySelector("span:not(.adaire-mega-menu__chevron)").textContent,a=i.getAttribute("href")||"#",o=null!==i.querySelector(".adaire-mega-menu__bold"),r={id:`item-${n.length}`,title:e,url:a,isBold:o,children:[]};t.querySelectorAll(".adaire-mega-menu__sub-dropdown").forEach(e=>{const n=e.querySelector(".adaire-mega-menu__sub-dropdown-header"),i=e.querySelector(".adaire-mega-menu__sub-menu");if(n){const e=n.querySelector("span:not(.adaire-mega-menu__chevron)").textContent,t=n.getAttribute("href")||"#",a=null!==n.querySelector(".adaire-mega-menu__bold"),o={id:`subitem-${r.id}-${r.children.length}`,title:e,url:t,isBold:a,children:[]};i&&i.querySelectorAll("li a").forEach(e=>{const n={id:`tier3-${o.id}-${o.children.length}`,title:e.textContent,url:e.getAttribute("href")||"#",isBold:e.classList.contains("adaire-mega-menu__bold")};o.children.push(n)}),r.children.push(o)}}),n.push(r)}}),n}(),console.log("Menu items extracted:",c),setTimeout(()=>{d()},100))})):console.log("Mobile menu elements not found:",{menuBtn:n,mobileOverlay:i,mobileContent:t}),i&&i.addEventListener("click",e=>{e.target===i&&(console.log("Overlay clicked - closing menu"),i.classList.remove("mobile-overlay-show"),n.innerHTML='<span class="adaire-mega-menu__menu-icon">☰</span>',r=!1,s=[])}),a.forEach(e=>{let n=!1;e.addEventListener("click",i=>{if(window.innerWidth<=800){i.preventDefault(),i.stopPropagation();const n=e.nextElementSibling;n&&n.classList.contains("adaire-mega-menu__menu")&&navigateToTier2(e,n)}else{i.preventDefault(),i.stopPropagation(),n=!0;const t=e.nextElementSibling,o=e.querySelector(".adaire-mega-menu__chevron");a.forEach(n=>{if(n!==e){const e=n.nextElementSibling,i=n.querySelector(".adaire-mega-menu__chevron");e&&e.classList.remove("menu-show"),i&&i.classList.remove("icon-rotated")}}),t&&(t.classList.contains("menu-show")?(t.classList.remove("menu-show"),l=null):(t.classList.add("menu-show"),l=e)),o&&o.classList.toggle("icon-rotated")}}),e.addEventListener("mouseenter",()=>{a.forEach(n=>{if(n!==e){const e=n.nextElementSibling,i=n.querySelector(".adaire-mega-menu__chevron");e&&e.classList.contains("menu-show")&&e.classList.remove("menu-show"),i&&i.classList.contains("icon-rotated")&&i.classList.remove("icon-rotated")}}),l=null;const n=e.nextElementSibling,i=e.querySelector(".adaire-mega-menu__chevron");n&&n.classList.add("menu-show"),i&&i.classList.add("icon-rotated")}),e.addEventListener("mouseleave",()=>{if(!n&&l!==e){const n=e.nextElementSibling,i=e.querySelector(".adaire-mega-menu__chevron");n&&n.classList.remove("menu-show"),i&&i.classList.remove("icon-rotated")}}),document.addEventListener("click",()=>{l!==e&&(n=!1)})}),o.forEach(e=>{e.addEventListener("click",n=>{if(window.innerWidth<=800){n.preventDefault(),n.stopPropagation();const i=e.nextElementSibling;i&&i.classList.contains("adaire-mega-menu__sub-menu")&&navigateToTier3(e,i)}else{n.preventDefault();const i=e.nextElementSibling,t=e.querySelector(".adaire-mega-menu__chevron");i&&i.classList.toggle("sub-menu-show"),t&&t.classList.toggle("icon-rotated")}})}),window.addEventListener("resize",()=>{window.innerWidth>800&&r&&(i.classList.remove("mobile-overlay-show"),n&&(n.innerHTML='<span class="adaire-mega-menu__menu-icon">☰</span>',r=!1),s=[])}),document.addEventListener("click",t=>{if(window.innerWidth<=800&&r&&(e.contains(t.target)||(i.classList.remove("mobile-overlay-show"),n&&(n.innerHTML='<span class="adaire-mega-menu__menu-icon">☰</span>',r=!1),s=[])),window.innerWidth>800&&l&&!e.contains(t.target)){const e=l.nextElementSibling,n=l.querySelector(".adaire-mega-menu__chevron");e&&e.classList.remove("menu-show"),n&&n.classList.remove("icon-rotated"),l=null}});e.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",i=>{const t=n.getAttribute("href");if("#"===t)return void i.preventDefault();const a=document.querySelector(t);if(a){i.preventDefault();const n=a.offsetTop-e.offsetHeight-20;window.scrollTo({top:n,behavior:"smooth"})}})});if("true"===e.getAttribute("data-sticky")){let n=0;const i=e.querySelector(".adaire-mega-menu__navbar");window.addEventListener("scroll",()=>{const e=window.pageYOffset||document.documentElement.scrollTop;i.style.transform=e>n&&e>100?"translateY(-100%)":"translateY(0)",n=e})}e.addEventListener("keydown",e=>{"Escape"===e.key&&window.innerWidth<=800&&r&&(s.length>0?(e.preventDefault(),s.pop(),d()):(i.classList.remove("mobile-overlay-show"),n.innerHTML='<span class="adaire-mega-menu__menu-icon">☰</span>',r=!1,s=[]))});e.querySelectorAll('a, button, [tabindex]:not([tabindex="-1"])').forEach(e=>{e.addEventListener("focus",()=>{e.style.outline="2px solid var(--mega-menu-hover-color)",e.style.outlineOffset="2px"}),e.addEventListener("blur",()=>{e.style.outline="none"})})}(e)})});