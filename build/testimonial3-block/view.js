document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".adaire-testimonial3");0!==e.length&&e.forEach(e=>{e.getAttribute("data-block-id");const t=JSON.parse(e.getAttribute("data-testimonials")||"[]"),a=(JSON.parse(e.getAttribute("data-slides-per-view")||'{"desktop":3,"tablet":2,"mobile":1}'),"true"===e.getAttribute("data-show-pagination"));let n,i=null,l=null,o=!1,s=0,r=0,c=0,d=0,m=0,u=0,p=0,h=0,v=!1,f=null,y=null;function g(){const t=e.querySelector(".adaire-testimonial3__wrapper"),a=e.querySelector(".adaire-testimonial3__track");if(!t||!a)return;if(i===t&&l===a&&"true"===i.dataset.dragInitialized)return;i=t,l=a,i.dataset.dragInitialized="true";let n=0;const g=()=>{const e=l.scrollWidth-l.clientWidth,t=l.scrollLeft;return t<=0&&c<0||t>=e&&c>0||Math.abs(c)<.5?(v=!1,c=0,l.style.scrollBehavior="smooth",void(l.style.scrollSnapType="x mandatory")):(l.scrollLeft+=c,c*=.92,void(y=requestAnimationFrame(g)))},_=()=>{o=!1,i.style.cursor="grab",i.style.userSelect="",f&&(cancelAnimationFrame(f),f=null),Math.abs(c)>1?(v=!0,l.style.scrollBehavior="auto",l.style.scrollSnapType="none",g()):(l.style.scrollBehavior="smooth",l.style.scrollSnapType="x mandatory")};i.addEventListener("mousedown",e=>{o=!0,v=!1,c=0,d=e.clientX,m=Date.now(),y&&(cancelAnimationFrame(y),y=null);const t=i.getBoundingClientRect();n=t.left,s=e.clientX-n,r=l.scrollLeft,i.style.cursor="grabbing",i.style.userSelect="none",l.style.scrollBehavior="auto",l.style.scrollSnapType="none",e.preventDefault()}),i.addEventListener("mouseleave",()=>{o&&_(),i.style.cursor="grab"}),i.addEventListener("mouseup",_),document.addEventListener("mousemove",e=>{if(!o)return;const t=e.clientX,a=Date.now(),i=a-m;i>0&&(c=-2*(t-d)/i*16),d=t,m=a,f&&cancelAnimationFrame(f),f=requestAnimationFrame(()=>{const t=2*(e.clientX-n-s),a=l.scrollLeft,i=r-t-a;l.scrollLeft=a+.6*i}),e.preventDefault()});let E=0,L=0,A=0;i.addEventListener("touchstart",e=>{h=0,u=e.touches[0].clientX,p=Date.now(),y&&(cancelAnimationFrame(y),y=null);const t=i.getBoundingClientRect();A=t.left,E=e.touches[0].clientX-A,L=l.scrollLeft,l.style.scrollBehavior="auto",l.style.scrollSnapType="none"},{passive:!1}),i.addEventListener("touchmove",e=>{if(!E)return;const t=e.touches[0].clientX,a=Date.now(),n=a-p;n>0&&(h=-2*(t-u)/n*16),u=t,p=a,f&&cancelAnimationFrame(f),f=requestAnimationFrame(()=>{const t=2*(e.touches[0].clientX-A-E),a=l.scrollLeft,n=L-t-a;l.scrollLeft=a+.6*n}),e.preventDefault()},{passive:!1}),i.addEventListener("touchend",()=>{Math.abs(h)>1?(c=h,v=!0,l.style.scrollBehavior="auto",l.style.scrollSnapType="none",g()):(l.style.scrollBehavior="smooth",l.style.scrollSnapType="x mandatory"),E=0,f&&(cancelAnimationFrame(f),f=null)}),i.style.cursor="grab"}!function(){try{!function(){const a=e.querySelector(".adaire-testimonial3__track");a&&(a.innerHTML="",t.forEach((t,n)=>{const i=document.createElement("div");i.className="adaire-testimonial3__slide",i.setAttribute("data-testimonial-id",t.id);const l=document.createElement("div");l.className="adaire-testimonial3__card";const o=document.createElement("div");o.className="adaire-testimonial3__quote-icon";const s=e.getAttribute("data-quote-icon-size")||"60",r=e.getAttribute("data-quote-icon-color")||"#6B46C1";o.innerHTML=`\n                    <svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z" fill="${r}"/>\n                    </svg>\n                `;const c=document.createElement("div");c.className="adaire-testimonial3__quote",c.textContent=t.quote||"";const d=document.createElement("div");if(d.className="adaire-testimonial3__author",t.profileImage?.url){const e=document.createElement("img");e.src=t.profileImage.url,e.alt=t.profileImage.alt||t.name||"",e.className="adaire-testimonial3__profile-image",d.appendChild(e)}const m=document.createElement("div");m.className="adaire-testimonial3__author-info";const u=document.createElement("div");u.className="adaire-testimonial3__name",u.textContent=t.name||"";const p=document.createElement("div");p.className="adaire-testimonial3__title",p.textContent=t.title||"",m.appendChild(u),m.appendChild(p),d.appendChild(m),l.appendChild(o),l.appendChild(c),l.appendChild(d),i.appendChild(l),a.appendChild(i)}))}(),g(),function(){if(!a)return;const n=e.querySelector(".adaire-testimonial3__pagination");if(!n)return;n.innerHTML="",t.forEach((e,t)=>{const a=document.createElement("span");a.className="adaire-testimonial3__pagination-dot",0===t&&a.classList.add("is-active"),n.appendChild(a)});const i=e.querySelector(".adaire-testimonial3__track");i&&i.addEventListener("scroll",()=>{const e=i.querySelectorAll(".adaire-testimonial3__slide"),t=n.querySelectorAll(".adaire-testimonial3__pagination-dot");e.forEach((e,a)=>{const n=e.getBoundingClientRect(),l=i.getBoundingClientRect();n.left<=l.left+l.width/2&&n.right>=l.left+l.width/2&&(t.forEach(e=>e.classList.remove("is-active")),t[a]&&t[a].classList.add("is-active"))})})}()}catch(e){console.error("Error initializing testimonial carousel:",e)}}(),window.addEventListener("resize",()=>{clearTimeout(n),n=setTimeout(()=>{g()},250)})})});